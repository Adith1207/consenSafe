{% extends "base.html" %}
{% block content %}

<div class="dashboard">

  <div class="dashboard-header">
    <div>
      <h1>Granted Access</h1>
      <p class="welcome-text">
        Authorization state for your application
      </p>
    </div>
  </div>

  {% if consents %}
  <div class="dashboard-grid">
    {% for c in consents %}
    <div class="dashboard-card">
      <i class="fa-solid fa-user-lock"></i>

      <h3>User: {{ c.user_name }}</h3>

      <p><strong>Allowed Fields:</strong> {{ c.allowed_fields }}</p>
      <p><strong>Purpose:</strong> {{ c.purpose }}</p>
      <p><strong>Expiry:</strong> {{ c.expiry }}</p>

      {% if c.status == 'approved' %}
        <span class="status-badge approved">Active</span>
      {% else %}
        <span class="status-badge revoked">Revoked</span>
      {% endif %}
    </div>
    {% endfor %}
  </div>
  {% else %}
    <p>No consent records found.</p>
  {% endif %}

</div>

{% endblock %}