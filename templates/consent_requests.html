{% extends "base.html" %}
{% block content %}

<div class="dashboard">

  <!-- Header -->
  <div class="dashboard-header">
    <div>
      <h1>Consent Requests</h1>
      <p class="welcome-text">
        Applications requesting access to your personal data.
      </p>
    </div>
  </div>

  <!-- Content -->
  <div class="section">

    {% if consents %}
      <div class="dashboard-grid">

        {% for c in consents %}
        <div class="dashboard-card">

          <!-- App Info -->
          <h3>{{ c.app_name }}</h3>

          <p>
            <strong>Requested Data:</strong><br>
            {{ c.allowed_fields }}
          </p>

          <p>
            <strong>Purpose:</strong><br>
            {{ c.purpose }}
          </p>

          <p>
            <strong>Access Valid Until:</strong><br>
            {{ c.expiry }}
          </p>

          <!-- Action -->
          <div class="action-row">
            <a href="{{ url_for('approve_consent', consent_id=c.id) }}"
               class="primary-btn">
              Approve Request
            </a>
          </div>

        </div>
        {% endfor %}

      </div>
    {% else %}
      <p>No pending consent requests.</p>
    {% endif %}

  </div>

</div>

{% endblock %}