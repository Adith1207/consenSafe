{% extends "base.html" %}
{% block content %}

<div class="dashboard">

  <div class="dashboard-header">
    <div>
      <h1>My Consents</h1>
      <p class="welcome-text">Review and manage granted permissions.</p>
    </div>
  </div>

  <div class="section">

    {% if consents %}
      <div class="dashboard-grid">
        {% for c in consents %}
        <div class="dashboard-card">
          <h3>{{ c.app_name }}</h3>
          <p><strong>Fields:</strong> {{ c.allowed_fields }}</p>
          <p><strong>Purpose:</strong> {{ c.purpose }}</p>
          <p><strong>Expiry:</strong> {{ c.expiry }}</p>

          {% if c.status == "approved" %}
            <a href="{{ url_for('revoke_consent', consent_id=c.id) }}"
               class="danger-btn">
              Revoke Consent
            </a>
          {% else %}
            <span class="revoked-label">Revoked</span>
          {% endif %}
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p>No active consent requests.</p>
    {% endif %}

  </div>

</div>

{% endblock %}